<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <!-- <link rel="stylesheet" href="/sisu.css"> -->
        <style></style>
        <title></title>
    </head>
    <body>
        <main>
            <form action="" id="signin">
                <label for="username">Username <input type="text" name="username" id="username" required></label>
                <label for="passwd">Password <input type="password" name="password" id="passwd" autocomplete="" required></label>
                <input type="submit" value="Sign In">
            </form>
            <form action="" id="signup">
                <label for="name">Full Name <input type="text" name="fullname" id="name" required></label>
                <label for="age">Age <input type="number" name="age" id="age" min="5" max="100" required></label>
                <label for="username">Username <input type="text" name="username" id="newusername" required></label>
                <label for="email">Email <input type="email" name="email" id="email" required></label>
                <label for="createpasswd">Create Password <input type="password" name="crtpasswd" autocomplete="" id="createpasswd" required></label>
                <label for="confirmpasswd">Confirm Password <input type="password" name="cnfpasswd" autocomplete="" id="confirmpasswd" required></label>
                <input type="submit" value="Sign Up">
            </form>
        </main>
        <script>
            $(document).ready(() => {
                $('#signin').submit((e) => {
                    e.preventDefault();
                    const cred = {
                        username:$('#username').val(),
                        password:$('#passwd').val()
                    }
                    const xhr = new XMLHttpRequest();
                    xhr.open('POST','/signin');
                    xhr.setRequestHeader('Content-Type','application/json');
                    xhr.send(JSON.stringify(cred));
                    xhr.onload = () => {
                        console.log(xhr.status);
                        if (parseInt(xhr.status) === 200) {
                            window.location.href = "/";
                        }
                        else{
                            const err = JSON.parse(xhr.responseText);
                            console.log(err);
                        }
                    };
                });
                $('#signup').submit((e) => {
                    e.preventDefault();
                    const cred = {
                        name:$('#name').val(),
                        age:$('#age').val(),
                        newusername:$('#newusername').val(),
                        email:$('#email').val(),
                        createpasswd:$('#createpasswd').val(),
                        confirmpasswd:$('#confirmpasswd').val(),
                    };
                    const xhr = new XMLHttpRequest();
                    xhr.open('POST','/signup');
                    xhr.setRequestHeader('Content-Type','application/json');
                    xhr.send(JSON.stringify(cred));
                    xhr.onload = () => {
                        if (xhr.status === 200) {
                            window.location.href = "/";
                        }
                        else{
                            const err = JSON.parse(xhr.responseText);
                            console.log(err);
                        }
                    };
                });
            });
        </script>
    </body>
</html>